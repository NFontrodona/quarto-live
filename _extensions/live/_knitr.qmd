```{r echo=FALSE}
# Setup knitr for handling {webr} blocks
knitr::knit_engines$set(webr = function(options) {
  knitr:::one_string(c(
    paste0(
      "```{.",
      gsub(',(?=(?:[^\'"\n]*"[^\'"\n]*")*[^\'"\n]*$)', "", options$original.params.src, perl = TRUE),
      "}"
    ),
    options$yaml.code,
    options$code,
    "```"
  ))
})

# Pyodide
knitr::knit_engines$set(pyodide = function(options) {
  knitr:::one_string(c(
    "```{pyodide}",
    options$yaml.code,
    options$code,
    "```"
  ))
})
```
